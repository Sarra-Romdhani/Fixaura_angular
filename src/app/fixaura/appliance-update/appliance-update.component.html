<div class="container-fluid p-4">
  <div class="header d-flex align-items-center mb-4">
    <button class="btn btn-link text-white p-0 me-2" (click)="navigateBack()">
      <i class="bi bi-arrow-left"></i>
    </button>
    <h1 class="text-white">Modifier l'Appareil</h1>
  </div>
  <form [formGroup]="applianceForm" (ngSubmit)="submitForm()">
    <div class="mb-3">
      <div class="image-upload border border-amber rounded bg-medium-grey d-flex align-items-center justify-content-center w-100" (click)="fileInput.click()">
        <i *ngIf="!imagePreview" class="bi bi-camera text-amber"></i>
        <img *ngIf="imagePreview" [src]="imagePreview" class="img-fluid rounded" alt="Appliance">
        <input type="file" #fileInput style="display: none;" (change)="onFileChange($event)" accept="image/*">
      </div>
    </div>
    <div class="mb-3">
      <label for="modele" class="form-label text-white-70">Modèle</label>
      <input type="text" class="form-control bg-medium-grey text-white border-amber w-100 input-lg" id="modele" formControlName="modele" required>
      <div *ngIf="applianceForm.get('modele')?.invalid && applianceForm.get('modele')?.touched" class="text-danger">
        Veuillez entrer un modèle
      </div>
    </div>
    <div class="mb-3">
      <label for="brand" class="form-label text-white-70">Marque</label>
      <select class="form-select bg-medium-grey text-white border-amber w-100 input-lg" id="brand" formControlName="brand" required>
        <option value="">Sélectionner une marque</option>
        <option *ngFor="let brand of brands" [value]="brand">{{ brand }}</option>
      </select>
      <div *ngIf="applianceForm.get('brand')?.invalid && applianceForm.get('brand')?.touched" class="text-danger">
        Veuillez sélectionner une marque
      </div>
    </div>
    <div class="mb-3">
      <label for="purchaseDate" class="form-label text-white-70">Date d'achat</label>
      <input type="date" class="form-control bg-medium-grey text-white border-amber w-100 input-lg" id="purchaseDate" formControlName="purchaseDate" required>
      <div *ngIf="applianceForm.get('purchaseDate')?.invalid && applianceForm.get('purchaseDate')?.touched" class="text-danger">
        Veuillez sélectionner une date
      </div>
    </div>
    <div class="mb-3">
      <label for="breakdownCount" class="form-label text-white-70">Nombre de pannes</label>
      <input type="number" class="form-control bg-medium-grey text-white border-amber w-100 input-lg" id="breakdownCount" formControlName="breakdownCount" required>
      <div *ngIf="applianceForm.get('breakdownCount')?.invalid && applianceForm.get('breakdownCount')?.touched" class="text-danger">
        Veuillez entrer un nombre
      </div>
    </div>
    <div class="mb-3">
      <label for="lastBreakdownDate" class="form-label text-white-70">Date de la dernière panne</label>
      <input type="date" class="form-control bg-medium-grey text-white border-amber w-100 input-lg" id="lastBreakdownDate" formControlName="lastBreakdownDate">
    </div>
    <div class="mb-3">
      <label for="lastMaintenanceDate" class="form-label text-white-70">Date du dernier entretien</label>
      <input type="date" class="form-control bg-medium-grey text-white border-amber w-100 input-lg" id="lastMaintenanceDate" formControlName="lastMaintenanceDate">
    </div>
    <div class="text-center">
      <button type="submit" class="btn btn-amber text-black btn-xl" [disabled]="isLoading || applianceForm.invalid">
        <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
        <i class="bi bi-save me-2"></i>Enregistrer
      </button>
    </div>
  </form>
</div>